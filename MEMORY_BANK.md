# Memory Bank - –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–π –ü–æ–º–æ—â–Ω–∏–∫

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ!** –ù–µ –ø—ã—Ç–∞–π—Å—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É VPS - –æ–Ω–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥**: Python + python-telegram-bot
- **–ò–ò**: OpenRouter API (DeepSeek)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (–ø—Ä–æ—Å—Ç—ã–µ —Å–ª–æ–≤–∞—Ä–∏)
- **–î–µ–ø–ª–æ–π**: Docker + docker-compose –Ω–∞ VPS Ubuntu

### –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `docker-compose.yml` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- `Dockerfile` - —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
- `requirements.txt` - Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `.env` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ (—Ç–æ–∫–µ–Ω—ã)

## –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é (—É–ø—Ä–æ—â–µ–Ω–æ 06.10.2025)
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–æ–ø–∞–ª–∞ –∫–Ω–æ–ø–∫–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –ø–æ–¥ –æ—Ç–≤–µ—Ç–∞–º–∏ –±–æ—Ç–∞
- **–†–µ—à–µ–Ω–∏–µ**: –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ "üìã –ú–µ–Ω—é" –ø–æ–¥ –∫–∞–∂–¥—ã–º –æ—Ç–≤–µ—Ç–æ–º (–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–ª–æ–≤, —Ñ—Ä–∞–∑, –ø–µ—Ä–µ—Å–∫–∞–∑, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)
- **–£–±—Ä–∞–Ω—ã**: –ö–Ω–æ–ø–∫–∏ "–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–ª–æ–≤–∞—Ä—å", "–û—Ü–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç", "–û–±—ä—è—Å–Ω–∏—Ç—å –∏–Ω–∞—á–µ", "–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å"
- **–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã**:
  - `keyboards.py` - —É–ø—Ä–æ—â–µ–Ω–∞ get_response_actions_keyboard() - —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é
  - `handlers/callback_handler.py` - —É–ø—Ä–æ—â–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, —Ç–æ–ª—å–∫–æ show_menu
  - `main.py` - –ø–æ–¥–∫–ª—é—á–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–±—ç–∫
  - –í—Å–µ handlers (word, phrase, retell, character) - reply_markup —Å –∫–Ω–æ–ø–∫–æ–π –º–µ–Ω—é

## –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ VPS

**–ü–†–ê–í–ò–õ–¨–ù–´–ô –°–ü–û–°–û–ë** (—á–µ—Ä–µ–∑ Docker):
```bash
cd ~/som_lit_bot
git pull origin main
docker-compose down
docker-compose up -d --build
docker-compose logs
```

**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô –°–ü–û–°–û–ë** (–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è Docker-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π):
```bash
# –ù–ï –î–ï–õ–ê–¢–¨ –≠–¢–û!
pip3 install -r requirements.txt
python3 main.py &
```

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã VPS

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞
```bash
cd ~/som_lit_bot
git pull origin main
docker-compose restart
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
docker-compose ps
docker-compose logs -f
ps aux | grep python
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å)
docker cp literary-bot:/app/database.db ./backup.db
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
```bash
# –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose logs literary-bot

# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec literary-bot bash

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã
docker-compose exec literary-bot ls -la
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

1. **"ModuleNotFoundError: No module named 'telegram'"**
   - –ü—Ä–∏—á–∏–Ω–∞: –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –≤–Ω–µ Docker
   - –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å docker-compose up --build

2. **–ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ .env
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker-compose logs`

3. **–ö–Ω–æ–ø–∫–∞ –º–µ–Ω—é –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ handlers/callback_handler.py
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

4. **–ë–æ—Ç –Ω–µ –æ–±—ä—è—Å–Ω—è–µ—Ç —Å–ª–æ–≤–∞ (–æ—à–∏–±–∫–∞ 404 –æ—Ç API)**
   - **–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç OPENROUTER_API_KEY –∏–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
   - **–°–∏–º–ø—Ç–æ–º—ã**: –í –ª–æ–≥–∞—Ö "API –æ—à–∏–±–∫–∞: 404 - No endpoints found matching your data policy"
   - **–†–µ—à–µ–Ω–∏–µ**:
     - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env: `grep "OPENROUTER_API_KEY" .env`
     - –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç - –¥–æ–±–∞–≤–∏—Ç—å: `echo "OPENROUTER_API_KEY=sk-or-v1-..." >> .env`
     - –ï—Å–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è DeepSeek –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ - –∑–∞–º–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å –Ω–∞ google/gemini-2.0-flash-lite-001 –≤ llm_service.py
     - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: `docker-compose down && docker-compose up -d --build`

## –í–∞–∂–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

- **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π Docker** –¥–ª—è –∑–∞–ø—É—Å–∫–∞/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É** - –æ–Ω–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–ü—Ä–æ–≤–µ—Ä—è–π –ª–æ–≥–∏** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **–î–µ–ª–∞–π git pull** –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º Docker

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **08.10.2025**: –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Å–ª–æ–≤ - –∑–∞–º–µ–Ω–µ–Ω–∞ –º–æ–¥–µ–ª—å DeepSeek free –Ω–∞ Google Gemini 2.0 Flash Lite –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
- **06.10.2025**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é –ø–æ–¥ –æ—Ç–≤–µ—Ç–∞–º–∏ –±–æ—Ç–∞
- **05.10.2025**: –£–±—Ä–∞–Ω—ã action-–∫–Ω–æ–ø–∫–∏, –≤—ã–∑–≤–∞–≤—à–∏–µ –ø—Ä–æ–ø–∞–∂—É –º–µ–Ω—é
- **–†–∞–Ω–µ–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≥–µ—Ä–æ—è

---

*–û–±–Ω–æ–≤–ª—è–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –≤–∞–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã.*
